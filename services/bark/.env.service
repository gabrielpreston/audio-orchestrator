BARK_VOICE_PRESET=v2/en_speaker_1
PORT=7100

# Model download and cache configuration
FORCE_MODEL_DOWNLOAD_BARK_MODELS=false

# Bark model configuration
# Enable small models for 30-50% speedup (slight quality trade-off)
BARK_USE_SMALL_MODELS=true

# Bark performance optimizations
# torch.compile() optimization (replaces deprecated Better Transformer)
BARK_ENABLE_TORCH_COMPILE=true
BARK_COMPILE_MODE=max-autotune-no-cudagraphs

# Pre-warming to trigger torch.compile() warmup during startup
BARK_ENABLE_PREWARM=true

# Result caching for repeated synthesis requests
BARK_ENABLE_CACHE=true
BARK_CACHE_MAX_ENTRIES=100
BARK_CACHE_MAX_SIZE_MB=500

# INT8 quantization (disabled by default, requires quality validation)
BARK_ENABLE_INT8_QUANTIZATION=false

# Hugging Face and cache directory configuration
HF_HOME=/app/models
HOME=/app
XDG_CACHE_HOME=/app/models

# PyTorch threading optimization (match CPU count)
OMP_NUM_THREADS=8
MKL_NUM_THREADS=8

# CUDA memory optimization (enhances base image setting)
# Base image sets: PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:128
# This adds expandable_segments if supported (verify PyTorch version compatibility)
PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:128,expandable_segments:True
