# discord-voice-lab environment template
#
# This sample shows the new split between shared defaults and service-specific
# configuration files. Copy each section into the matching path before running
# `make dev-*` or `make run`.

#######################################
# ./services/discord/.env.service     #
#######################################
DISCORD_BOT_TOKEN=changeme
DISCORD_GUILD_ID=000000000000000000
DISCORD_VOICE_CHANNEL_ID=000000000000000000
DISCORD_AUTO_JOIN=false
DISCORD_INTENTS=guilds,guild_voice_states
DISCORD_VOICE_CONNECT_TIMEOUT=15
DISCORD_VOICE_CONNECT_ATTEMPTS=3
DISCORD_VOICE_RECONNECT_BASE_DELAY=5
DISCORD_VOICE_RECONNECT_MAX_DELAY=60
AUDIO_ALLOWLIST=
AUDIO_SILENCE_TIMEOUT=0.75
AUDIO_MAX_SEGMENT_DURATION=15
AUDIO_MIN_SEGMENT_DURATION=0.3
AUDIO_AGGREGATION_WINDOW=1.5
AUDIO_SAMPLE_RATE=48000
AUDIO_VAD_SAMPLE_RATE=16000
AUDIO_VAD_FRAME_MS=30
AUDIO_VAD_AGGRESSIVENESS=2
# Audio I/O Pipeline Configuration
AUDIO_CANONICAL_SAMPLE_RATE=48000
AUDIO_CANONICAL_FRAME_MS=20
AUDIO_CANONICAL_SAMPLES_PER_FRAME=960
AUDIO_JITTER_TARGET_FRAMES=3
AUDIO_JITTER_MAX_FRAMES=8
AUDIO_VAD_PADDING_MS=200
AUDIO_LOUDNORM_ENABLED=true
AUDIO_LOUDNORM_TARGET_LUFS=-16.0
AUDIO_LOUDNORM_TARGET_TP=-1.5
AUDIO_LOUDNORM_LRA=11
AUDIO_UNDERRUN_SILENCE_FRAMES=1
AUDIO_OVERFLOW_DROP_OLDEST=true
STT_BASE_URL=http://stt:9000
STT_TIMEOUT=45
STT_MAX_RETRIES=3
STT_FORCED_LANGUAGE=en
WAKE_MODEL_PATHS=
WAKE_PHRASES=hey atlas,ok atlas
ORCHESTRATOR_WAKE_PHRASES=
WAKE_THRESHOLD=0.5
WAKE_SAMPLE_RATE=16000
MCP_MANIFESTS=
MCP_WEBSOCKET_URL=
MCP_COMMAND_PATH=
MCP_REGISTRATION_URL=
MCP_HEARTBEAT_INTERVAL=30
METRICS_PORT=
WAVEFORM_DEBUG_DIR=

###################################
# ./services/stt/.env.service     #
###################################
FW_MODEL=medium.en
FW_DEVICE=cpu
FW_COMPUTE_TYPE=int8

##################################
# ./services/llm/.env.service    #
##################################
LLAMA_BIN=/app/llama.cpp/build/bin/llama-cli
LLAMA_MODEL_PATH=/app/models/llama-2-7b.Q4_K_M.gguf
LLAMA_CTX=2048
LLAMA_THREADS=4
ORCH_AUTH_TOKEN=changeme
ORCHESTRATOR_DEBUG_SAVE=false
PORT=8000
TTS_BASE_URL=http://tts:7000
TTS_VOICE=
TTS_TIMEOUT=30

########################
# ./ .env.common       #
########################
LOG_LEVEL=info
LOG_JSON=true

########################
# ./ .env.docker       #
########################
PUID=1000
PGID=1000
TZ=Etc/UTC

##################################
# ./services/tts/.env.service    #
##################################
PORT=7000
TTS_MODEL_PATH=/app/models/piper/en_US-amy-medium.onnx
TTS_MODEL_CONFIG_PATH=/app/models/piper/en_US-amy-medium.onnx.json
TTS_DEFAULT_VOICE=
TTS_MAX_TEXT_LENGTH=1000
TTS_MAX_CONCURRENCY=4
TTS_RATE_LIMIT_PER_MINUTE=60
TTS_AUTH_TOKEN=changeme
TTS_LENGTH_SCALE=1.0
TTS_NOISE_SCALE=0.667
TTS_NOISE_W=0.8

##################################
# ./services/livekit/.env.service #
##################################
SERVICE_NAME=livekit-agent
PORT=8080
HOST=0.0.0.0
LIVEKIT_URL=wss://your-livekit-server.com
LIVEKIT_API_KEY=your-api-key
LIVEKIT_API_SECRET=your-api-secret
STT_BASE_URL=http://stt:9000
TTS_BASE_URL=http://tts:7000
ORCHESTRATOR_BASE_URL=http://orch:8000
CANONICAL_SAMPLE_RATE=16000
CANONICAL_FRAME_MS=20
OPUS_SAMPLE_RATE=48000
MAX_SESSION_DURATION_MINUTES=30
WAKE_COOLDOWN_MS=1000
VAD_TIMEOUT_MS=2000
ENDPOINTING_TIMEOUT_MS=5000
BARGE_IN_ENABLED=true
BARGE_IN_PAUSE_DELAY_MS=250
MAX_PAUSE_DURATION_MS=10000
TARGET_RTT_MEDIAN_MS=400
TARGET_RTT_P95_MS=650
MAX_PACKET_LOSS_PERCENT=10.0
MAX_JITTER_MS=80.0
LOG_LEVEL=info
LOG_JSON=true
LIVEKIT_DEBUG_SAVE=false
DEBUG_SAVE_DIR=/app/debug
AUTH_TOKEN=changeme
STT_TIMEOUT=45
TTS_TIMEOUT=30
ORCHESTRATOR_TIMEOUT=60
MAX_RETRIES=3
RETRY_DELAY_MS=1000
TELEMETRY_INTERVAL_MS=5000
METRICS_ENABLED=true
